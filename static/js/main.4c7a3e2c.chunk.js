(this["webpackJsonpcrime-alert"]=this["webpackJsonpcrime-alert"]||[]).push([[0],{180:function(e,t,a){e.exports=a(405)},185:function(e,t,a){},187:function(e,t,a){},405:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(80),c=a.n(i),l=(a(185),a(4)),o=a.n(l),s=a(28),u=a(6),m=a(7);a(187);function d(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"title-text"},"CRIME FIGHTERS"),r.a.createElement("h4",null,"Take justice in your own hands."),r.a.createElement("div",{style:{marginTop:20}}),r.a.createElement("button",{className:"mdc-button mdc-button--raised general"},r.a.createElement("a",{"data-toggle":"tab",href:"#locate"},"View Crime Alerts Log")),r.a.createElement("button",{className:"mdc-button mdc-button--raised general"},r.a.createElement("a",{"data-toggle":"tab",href:"#form"},"Report a Crime")),r.a.createElement("div",{style:{marginTop:30}}),r.a.createElement("img",{width:"340px",height:"200px",src:"https://pngimg.com/uploads/handcuffs/handcuffs_PNG33.png",alt:"logo"}),r.a.createElement("div",{style:{marginTop:20}}),r.a.createElement("h6",null,"Join our gamified crime alert community today."),r.a.createElement("button",{className:"mdc-button mdc-button--raised general"},r.a.createElement("a",{"data-toggle":"tab",href:"#register"},"Register Now")))}var p=a(8),f=(a(188),{apiKey:"AIzaSyCUYFOJIWpUXGo51TvSiu0am3ov1bTenFA",authDomain:"crime-alert-22ab6.firebaseapp.com",projectId:"crime-alert-22ab6",storageBucket:"crime-alert-22ab6.appspot.com",messagingSenderId:"1016818394710",appId:"1:1016818394710:web:98b1c9fb98af95aefb3df7",measurementId:"G-62L51TS7SP"}),v=(a(406),p.a.initializeApp(f)),h=p.a.firestore();function b(){return(b=Object(u.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){v.auth().signInWithEmailAndPassword(t,a).then(function(){var t=Object(u.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:y().then(function(){var t=Object(u.a)(o.a.mark((function t(a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(a.uid);case 2:n=t.sent,e(Object(s.a)(Object(s.a)({},a),n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log("Login failed: ",e.message),n(e)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return E.apply(this,arguments)}function E(){return(E=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.auth().signOut().then((function(){console.log("Successful log out"),window.location.replace("#home"),window.location.reload()})).catch((function(e){console.log("Logout failed ",e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(u.a)(o.a.mark((function e(t,a,n,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,i){v.auth().createUserWithEmailAndPassword(t,a).then((function(a){setTimeout((function(){h.collection("user").doc(a.user.uid).set({email:t,name:n,image_url:r,uid:a.user.uid,coins:100,rep:0,rank:"Beginner"}).then((function(){e(a.user)})).catch((function(e){i(e)}))}),100)})).catch((function(e){i(e)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return N.apply(this,arguments)}function N(){return(N=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){v.auth().onAuthStateChanged((function(a){a?e(a):t(!1)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return j.apply(this,arguments)}function j(){return(j=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){h.collection("user").doc(t).get().then((function(t){t.exists?e(t.data()):a(null)})).catch((function(e){a(e)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){h.collection("alert").get().then((function(t){var a=[];t.forEach((function(e){a.push(Object(s.a)({id:e.id},e.data()))})),e(a)})).catch((function(e){t(e)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){h.collection("shop").get().then((function(t){var a=[];t.forEach((function(e){a.push(Object(s.a)({id:e.id},e.data()))})),e(a)})).catch((function(e){t(e)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(u.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.collection("user").doc(a).update({coins:p.a.firestore.FieldValue.increment(-t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(u.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.collection("alert").doc(t).update({votes:p.a.firestore.FieldValue.increment(1)}).then((function(){h.collection("user").doc(a).update({upvotes_list:p.a.firestore.FieldValue.arrayUnion(t)})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(u.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.collection("alert").doc(t).update({votes:p.a.firestore.FieldValue.increment(-1)}).then((function(){h.collection("user").doc(a).update({downvotes_list:p.a.firestore.FieldValue.arrayUnion(t)})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(u.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.collection("alert").doc(t).update({votes:p.a.firestore.FieldValue.increment(-1)}).then((function(){h.collection("user").doc(a).update({upvotes_list:p.a.firestore.FieldValue.arrayRemove(t)})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(u.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.collection("alert").doc(t).update({votes:p.a.firestore.FieldValue.increment(1)}).then((function(){h.collection("user").doc(a).update({downvotes_list:p.a.firestore.FieldValue.arrayRemove(t)})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=Object(u.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.collection("alert").doc(t).update({votes:p.a.firestore.FieldValue.increment(-2)}).then((function(){h.collection("user").doc(a).update({upvotes_list:p.a.firestore.FieldValue.arrayRemove(t)}).then((function(){h.collection("user").doc(a).update({downvotes_list:p.a.firestore.FieldValue.arrayUnion(t)})}))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(u.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.collection("alert").doc(t).update({votes:p.a.firestore.FieldValue.increment(2)}).then((function(){h.collection("user").doc(a).update({downvotes_list:p.a.firestore.FieldValue.arrayRemove(t)}).then((function(){h.collection("user").doc(a).update({upvotes_list:p.a.firestore.FieldValue.arrayUnion(t)})}))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(u.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){h.collection("alert").doc(t).set(Object(s.a)({},a)).then((function(){e("Submitted.")})).catch((function(e){n(e)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}p.a.auth().languageCode="en";function V(e){var t=e.id,a=e.title,i=e.post_time,c=e.votes,l=e.contact,o=e.description,s=e.user_uid,u=(e.uid,e.location),d=e.upvoted,p=e.downvoted,f=Object(n.useState)(d),v=Object(m.a)(f,2),h=v[0],b=v[1],g=Object(n.useState)(p),E=Object(m.a)(g,2),w=E[0],y=E[1],N=Object(n.useState)(c),k=Object(m.a)(N,2),j=k[0],O=k[1];return Object(n.useEffect)((function(){b(d),y(p),O(c)}),[d,p,c]),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},a),r.a.createElement("h6",{className:"card-subtitle"},i),r.a.createElement("p",{className:"card-text"},o),r.a.createElement("div",{className:"card-minor"},r.a.createElement("div",{className:"card-extra"},l),null!=u&&r.a.createElement("div",{className:"card-loc"},u.latitude,", ",u.longitude)),r.a.createElement("button",{onClick:function(){h?(!function(e,t){P.apply(this,arguments)}(t,s),O(j-1),b(!1)):(w?(!function(e,t){A.apply(this,arguments)}(t,s),O(j+2)):(!function(e,t){_.apply(this,arguments)}(t,s),O(j+1)),b(!0),y(!1))},class:!0===h?"stat-item-marked":"stat-item"}," ",r.a.createElement("i",{class:"fa fa-thumbs-up icon"}))," \xa0",j,"\xa0\xa0",r.a.createElement("button",{onClick:function(){w?(!function(e,t){C.apply(this,arguments)}(t,s),O(j+1),y(!1)):(h?(!function(e,t){L.apply(this,arguments)}(t,s),O(j-2)):(!function(e,t){F.apply(this,arguments)}(t,s),O(j-1)),y(!0),b(!1))},class:!0===w?"stat-item-marked":"stat-item"}," ",r.a.createElement("i",{class:"fa fa-thumbs-down icon"}))))}function T(e){var t=e.user,a=e.loading,n=e.alertsList;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Crime Logs"),r.a.createElement("p",null,"Displaying all posted crime alerts. ",r.a.createElement("i",null,"Be cautious of any fake alerts and report them to us.")),null==t?"Please login to view our alerts.":a?r.a.createElement("div",{id:"loading"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"spinner-border",role:"status"}))):0===n.length?r.a.createElement("p",null,"No alerts to display."):n.map((function(e){var a=e.id,n=e.title,i=e.post_time,c=e.votes,l=e.location,o=e.contact,s=e.description,u=e.uid;return r.a.createElement(V,{id:a,title:n,uid:u,user_uid:t.uid,post_time:i,votes:c,location:l,contact:o,description:s,upvoted:t.upvotes_list.includes(a),downvoted:t.downvotes_list.includes(a)})})))}var U=a(30),I=Object(U.withScriptjs)(Object(U.withGoogleMap)((function(e){var t=e.isMarkerShown,a=e.location;return a?r.a.createElement(U.GoogleMap,{defaultZoom:15,defaultCenter:{lat:a.latitude,lng:a.longitude}},t&&r.a.createElement(U.Marker,{position:{lat:a.latitude,lng:a.longitude}})):r.a.createElement(r.a.Fragment,null)}))),q=Object(U.withScriptjs)(Object(U.withGoogleMap)((function(e){var t=e.markerList,a=e.location;return r.a.createElement(U.GoogleMap,{defaultZoom:15,defaultCenter:{lat:a.latitude,lng:a.longitude}},t.map((function(e){if(null!==e)return r.a.createElement(U.Marker,{position:{lat:e.latitude,lng:e.longitude}})})))})));function G(e){e.user;var t=e.alertsList,a=e.loading,i=Object(n.useState)(null),c=Object(m.a)(i,2),l=c[0],o=c[1];return Object(n.useEffect)((function(){var e=t.find((function(e){return null!==e.location}));o(void 0===e?null:e.location)}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Locate"),r.a.createElement("p",null,"The ",r.a.createElement("b",null,"markers")," represent all crime alerts submitted by other Crime Fighters."),!a&&0!==t.length&&r.a.createElement(q,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyDljegl-khc3VGfDMlG_2BpPF21jyFy5Ss&libraries=places&v=weekly",location:l,markerList:t.map((function(e){return e.location})),loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"330px"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}})}),r.a.createElement("br",null),r.a.createElement("br",null))}var M=a(5),W=a(21),B=a(23),D=a.n(B),J=D.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,onOpen:function(e){e.addEventListener("mouseenter",D.a.stopTimer),e.addEventListener("mouseleave",D.a.resumeTimer)}});function z(e){var t=e.user,a=Object(n.useState)(null),i=Object(m.a)(a,2),c=i[0],l=i[1];function o(){if("geolocation"in navigator){navigator.geolocation.watchPosition((function(e){var t=e.coords.latitude,a=e.coords.longitude;l(new p.a.firestore.GeoPoint(t,a))}),(function(){alert("Sorry, no position available.")}),{enableHighAccuracy:!1,maximumAge:100,timeout:5e3})}else alert("getCurrentPosition Error")}return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},r.a.createElement("h3",null,"Report a Crime"),r.a.createElement("p",null,"When a criminal activity is suspected, members are encouraged to report to authorities, and not to intervene. ",r.a.createElement("br",null),r.a.createElement("i",null,"Any false reports will be downvoted and bad reputation can lead to an account ban so please refrain from such activity.")),r.a.createElement("div",{className:"formik"},r.a.createElement(M.d,{initialValues:{title:"",description:"",contact:""},validationSchema:W.a({title:W.b().required("Please give an appropriate title and category to the alert."),description:W.b().required("A complete description about the crime details and the suspect you witnessed is required."),contact:W.b().required("Contact details are required for community verification and for the legal enforcement authorities.")}),onSubmit:function(e,a){var n=a.setSubmitting;setTimeout((function(){var a={title:e.title,description:e.description,contact:e.contact,post_time:(new Date).toLocaleString(),uid:t.uid,votes:0,location:c};console.log(a),function(e,t){return R.apply(this,arguments)}(t.uid,a).then((function(e){n(!1),J.fire({icon:"success",title:"Submitted the crime alert successfully."}),setTimeout((function(){window.location.reload()}),1500)})).catch((function(e){n(!1),D.a.fire({title:"Invalid details. Please try again.",text:e.message,icon:"error",timer:2500})}))}),400)}},(function(e){var t=e.touched,a=e.errors,n=e.isSubmitting;return r.a.createElement(M.c,{className:"spaced-form"},r.a.createElement("div",{className:"form-group"},r.a.createElement("small",null,"Title"),r.a.createElement(M.b,{type:"text",name:"title",placeholder:"Enter title",className:"form-control ".concat(t.title&&a.title?"is-invalid":"")}),r.a.createElement(M.a,{component:"div",name:"title",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("small",null,"Description"),r.a.createElement(M.b,{type:"text",name:"description",placeholder:"Enter description",className:"form-control ".concat(t.description&&a.description?"is-invalid":"")}),r.a.createElement(M.a,{component:"div",name:"description",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("small",null,"Contact"),r.a.createElement(M.b,{type:"text",name:"contact",placeholder:"Enter contact details",className:"form-control ".concat(t.contact&&a.contact?"is-invalid":"")}),r.a.createElement(M.a,{component:"div",name:"contact",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{id:"location-btn",onClick:o,className:"mdc-button mdc-button--raised general"},r.a.createElement("small",null," Add Location ")),void 0!==c&&null!==c&&r.a.createElement(I,{isMarkerShown:!0,googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyDljegl-khc3VGfDMlG_2BpPF21jyFy5Ss&libraries=places&v=weekly",location:c,loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"400px"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}})})),r.a.createElement("button",{type:"submit",className:"mdc-button mdc-button--raised general",disabled:n},n?r.a.createElement("div",{id:"login-spinner",className:"spinner-border",role:"status"}):"Report Crime"))})))))}function H(e){var t=e.name,a=e.image_url,n=e.email,i=e.rank,c=e.rep,l=e.coins;return r.a.createElement("div",{className:"d-flex flex-column justify-content-center align-items-center"},r.a.createElement("img",{id:"profile-img",src:a,alt:t}),r.a.createElement("br",null),r.a.createElement("h3",null,t),r.a.createElement("div",null,n),r.a.createElement("div",null,r.a.createElement("b",null,"Rank:")," ",i),r.a.createElement("div",null,r.a.createElement("b",null,"Reputation:")," ",c),r.a.createElement("div",null,r.a.createElement("b",null,"Coins:")," ",l),r.a.createElement("br",null),r.a.createElement("button",{style:{marginLeft:15},onClick:g,className:"mdc-button mdc-button--raised general"},"Logout"))}function Y(e){var t=e.user;return null!=t?r.a.createElement(H,{name:t.name,rank:t.rank,rep:t.rep,coins:t.coins,email:t.email,image_url:t.image_url}):r.a.createElement("div",null,r.a.createElement("div",{className:"container"},r.a.createElement("h3",null,"Welcome Back!"),r.a.createElement("div",{className:"formik"},r.a.createElement(M.d,{initialValues:{email:"",password:""},validationSchema:W.a({email:W.b().email("Invalid email address").required("An email address is required"),password:W.b().required("Password is required")}),onSubmit:function(e,t){var a=t.setSubmitting;setTimeout((function(){(function(e,t){return b.apply(this,arguments)})(e.email,e.password).then((function(e){a(!1),J.fire({icon:"success",title:"Signed in successfully."}),setTimeout((function(){window.location.reload()}),1500)})).catch((function(e){a(!1),D.a.fire({title:"Invalid login details. Please try again.",text:e.message,icon:"error",timer:2500})}))}),400)}},(function(e){var t=e.touched,a=e.errors,n=e.isSubmitting;return r.a.createElement(M.c,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("small",null,"Email"),r.a.createElement(M.b,{type:"email",name:"email",placeholder:"Enter email",className:"form-control ".concat(t.email&&a.email?"is-invalid":"")}),r.a.createElement(M.a,{component:"div",name:"email",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("small",null,"Password"),r.a.createElement(M.b,{type:"password",name:"password",placeholder:"Enter password",className:"form-control ".concat(t.password&&a.password?"is-invalid":"")}),r.a.createElement(M.a,{component:"div",name:"password",className:"invalid-feedback"})),r.a.createElement("br",null),r.a.createElement("button",{type:"submit",className:"mdc-button mdc-button--raised general",disabled:n},n?r.a.createElement("div",{id:"login-spinner",className:"spinner-border",role:"status"}):"Login"))}))),r.a.createElement("br",null),r.a.createElement("h6",null,"New user? Join our gamified crime alert community today."),r.a.createElement("button",{className:"mdc-button mdc-button--raised general"},r.a.createElement("a",{"data-toggle":"tab",href:"#register"},"Register"))))}function Z(e){var t=e.user;return null!=t?r.a.createElement(H,{name:t.name,rank:t.rank,rep:t.rep,coins:t.coins,email:t.email,image_url:t.image_url}):r.a.createElement("div",null,r.a.createElement("div",{className:"container"},r.a.createElement("h3",null,"Join us today!"),r.a.createElement("div",{className:"formik"},r.a.createElement(M.d,{initialValues:{email:"",password:"",name:"",image_url:""},validationSchema:W.a({email:W.b().email("Invalid email address").required("An email address is required."),password:W.b().required("A password is required."),name:W.b().required("Please enter your full name."),image_url:W.b().required("A valid image URL is required for your display picture.")}),onSubmit:function(e,t){var a=t.setSubmitting;setTimeout((function(){(function(e,t,a,n){return w.apply(this,arguments)})(e.email,e.password,e.name,e.image_url).then((function(e){a(!1),J.fire({icon:"success",title:"Registered successfully. Please proceed to login."}),setTimeout((function(){window.location.replace("#login"),window.location.reload()}),1500)})).catch((function(e){a(!1),D.a.fire({title:"Invalid details. Please try again.",text:e.message,icon:"error",timer:2500})}))}),400)}},(function(e){var t=e.touched,a=e.errors,n=e.isSubmitting;return r.a.createElement(M.c,{className:"spaced-form"},r.a.createElement("div",{className:"form-group"},r.a.createElement("small",null,"Name"),r.a.createElement(M.b,{type:"text",name:"name",placeholder:"Enter name",className:"form-control ".concat(t.name&&a.name?"is-invalid":"")}),r.a.createElement(M.a,{component:"div",name:"name",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("small",null,"Email"),r.a.createElement(M.b,{type:"email",name:"email",placeholder:"Enter email",className:"form-control ".concat(t.email&&a.email?"is-invalid":"")}),r.a.createElement(M.a,{component:"div",name:"email",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("small",null,"Password"),r.a.createElement(M.b,{type:"password",name:"password",placeholder:"Enter password",className:"form-control ".concat(t.password&&a.password?"is-invalid":"")}),r.a.createElement(M.a,{component:"div",name:"password",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("small",null,"Display Image URL"),r.a.createElement(M.b,{type:"text",name:"image_url",placeholder:"Enter an image URL for your display picture hosted online",className:"form-control ".concat(t.image_url&&a.image_url?"is-invalid":"")}),r.a.createElement(M.a,{component:"div",name:"image_url",className:"invalid-feedback"})),r.a.createElement("button",{type:"submit",className:"mdc-button mdc-button--raised general",disabled:n},n?r.a.createElement("div",{id:"login-spinner",className:"spinner-border",role:"status"}):"Register"))}))),r.a.createElement("br",null)))}function K(e){var t=e.image_url,a=e.uid,n=e.ucoins,i=e.description,c=e.title,l=e.coins,o=e.due_time;e.id;return r.a.createElement("div",{className:"col-sm-3 shop-card"},r.a.createElement("img",{className:"card-img-top shop-card-img",src:t,alt:c}),r.a.createElement("div",{className:"card-body shop-card-body"},r.a.createElement("h5",{className:"card-title shop-card-title"},c),r.a.createElement("p",{className:"card-text shop-card-text"},i),null!==o&&r.a.createElement("p",{className:"card-extra"},"Avail Until ",o.toDate().toLocaleString().toString()),r.a.createElement("button",{onClick:function(){n<l?D.a.fire({title:"Unable to purchase. You might have insufficient coins.",text:"Error.",icon:"error",timer:2500}):function(e,t){return S.apply(this,arguments)}(l,a).then((function(e){J.fire({icon:"success",title:"Purchase successful. Further details will be emailed to your later."}),window.location.reload()})).catch((function(e){D.a.fire({title:"Unable to purchase.",text:e.message,icon:"error",timer:2500})}))},className:"btn btn-primary shop-btn"},l," Coins")))}function X(e){var t=e.user,a=Object(n.useState)([]),i=Object(m.a)(a,2),c=i[0],l=i[1],s=Object(n.useState)(!0),d=Object(m.a)(s,2),p=d[0],f=d[1];return Object(n.useEffect)((function(){(function(){return x.apply(this,arguments)})().then(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l(t),f(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){l([]),f(!1)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Shop"),r.a.createElement("p",{className:"card-extra"},"Coins: ",t.coins),r.a.createElement("p",null,"Use your hard-earned coins from crime fighting to avail coupons, discounts and protection gear. "),r.a.createElement("div",{className:"row"},!p&&c.map((function(e){var a=e.title,n=e.description,i=e.coins,c=e.image_url,l=e.due_time,o=e.id;return r.a.createElement(K,{id:o,uid:t.uid,ucoins:t.coins,title:a,description:n,coins:i,image_url:c,due_time:l})}))))}var $=function(){var e=Object(n.useState)(!1),t=Object(m.a)(e,2),a=t[0],i=t[1],c=Object(n.useState)(null),l=Object(m.a)(c,2),p=l[0],f=l[1],v=Object(n.useState)([]),h=Object(m.a)(v,2),b=h[0],g=h[1],E=Object(n.useState)(!0),w=Object(m.a)(E,2),N=w[0],j=w[1];return Object(n.useEffect)((function(){y().then(function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t.uid);case 2:a=e.sent,f(Object(s.a)(Object(s.a)({},t),a)),i(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){f(null),i(!0)})),function(){return O.apply(this,arguments)}().then(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(t),j(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){g([]),j(!1)}))}),[]),a?r.a.createElement("div",{className:"App"},r.a.createElement("nav",{className:"navbar navbar-expand-sm bg-dark navbar-dark fixed-top"},r.a.createElement("a",{className:"navbar-brand title-text",href:"#home"},"Crime Fighters"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-target":"#collapsibleNavbar","data-toggle":"collapse"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"collapsibleNavbar"},r.a.createElement("ul",{className:"nav nav-tabs navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link active","data-toggle":"tab",href:"#home"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link","data-toggle":"tab",href:"#login"},null==p?"Login":"Profile")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link","data-toggle":"tab",href:"#form"},"Report a Crime")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link","data-toggle":"tab",href:"#view"},"View Crime Log")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link","data-toggle":"tab",href:"#locate"},"Locate")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link","data-toggle":"tab",href:"#shop"},"Shop"))))),r.a.createElement("div",{className:"tab-content container",id:"main"},r.a.createElement("div",{id:"home",className:"tab-pane fade in active show"},r.a.createElement(d,{user:p})),r.a.createElement("div",{id:"login",className:"tab-pane fade"},r.a.createElement(Y,{user:p})),r.a.createElement("div",{id:"register",className:"tab-pane fade"},r.a.createElement(Z,{user:p})),r.a.createElement("div",{id:"view",className:"tab-pane fade"},r.a.createElement(T,{user:p,alertsList:b,loading:N})),r.a.createElement("div",{id:"locate",className:"tab-pane fade"},r.a.createElement(G,{user:p,alertsList:b,loading:N})),r.a.createElement("div",{id:"form",className:"tab-pane fade"},r.a.createElement(z,{user:p})),r.a.createElement("div",{id:"shop",className:"tab-pane fade"},r.a.createElement(X,{user:p})))):r.a.createElement("div",{id:"loading-spinner",className:"spinner-border",role:"status"})},Q=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ee(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(r.a.createElement($,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/gamified-crime-alert",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/gamified-crime-alert","/service-worker.js");Q?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ee(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ee(t,e)}))}}()}},[[180,1,2]]]);
//# sourceMappingURL=main.4c7a3e2c.chunk.js.map