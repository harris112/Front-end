{"version":3,"sources":["components/Home.js","api/firebaseConfig.js","api/api.js","components/Alert.js","components/AlertView.js","components/MapComponents.js","components/Map.js","components/Toast.js","components/AlertForm.js","components/Profile.js","components/Login.js","components/Register.js","components/Shop.js","App.js","serviceWorker.js","index.js"],"names":["Home","className","style","marginTop","data-toggle","href","width","height","src","alt","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","firebaseApp","firebase","initializeApp","store","firestore","email","password","a","Promise","resolve","reject","auth","signInWithEmailAndPassword","then","resp","getLoggedInUser","user","getUserDetails","uid","details","catch","error","console","log","message","logout","signOut","window","location","replace","reload","err","name","image_url","createUserWithEmailAndPassword","setTimeout","collection","doc","set","coins","rep","rank","onAuthStateChanged","get","exists","data","querySnapshot","alertsList","forEach","push","id","shopItems","costCoins","update","FieldValue","increment","alertID","votes","upvotes_list","arrayUnion","downvotes_list","arrayRemove","languageCode","Alert","title","post_time","contact","description","user_uid","upvoted","downvoted","useState","upvotedState","setUpvotedState","downvotedState","setDownvotedState","votesState","setVotesState","useEffect","latitude","longitude","onClick","removeUpvote","upvoteFromDownvoteAlert","upvoteAlert","class","removeDownvote","downvoteFromUpvoteAlert","downvoteAlert","AlertView","loading","role","length","map","includes","MapComponent","withScriptjs","withGoogleMap","isMarkerShown","defaultZoom","defaultCenter","lat","lng","position","MainMap","markerList","markerLoc","Map","initLocation","setInitLocation","alertWithLoc","find","alert","undefined","googleMapURL","loadingElement","containerElement","mapElement","Toast","Swal","mixin","toast","showConfirmButton","timer","timerProgressBar","onOpen","addEventListener","stopTimer","resumeTimer","AlertForm","setLocation","handleLocation","navigator","geolocation","watchPosition","coords","GeoPoint","enableHighAccuracy","maximumAge","timeout","initialValues","validationSchema","Yup","required","onSubmit","values","setSubmitting","alertData","Date","toLocaleString","submitAlert","res","fire","icon","text","touched","errors","isSubmitting","type","placeholder","component","disabled","Profile","marginLeft","Login","login","Register","register","ShopCard","ucoins","due_time","toDate","toString","purchaseItem","Shop","setShopItems","setLoading","getShopItems","shopDocs","App","authStatusLoaded","setAuthStatusLoaded","setUser","setAlertList","getAllAlerts","alertDocs","data-target","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","serviceWorker","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","ReactDOM","render","document","getElementById","URL","process","origin","fetch","headers","response","contentType","status","indexOf","ready","unregister","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.4c7a3e2c.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nexport default function Home() {\r\n  return (\r\n    <>\r\n      <h1 className=\"title-text\">CRIME FIGHTERS</h1>\r\n      <h4>Take justice in your own hands.</h4>\r\n      \r\n      <div style={{marginTop: 20}}></div>\r\n      <button className=\"mdc-button mdc-button--raised general\">\r\n      <a data-toggle=\"tab\" href=\"#locate\">\r\n        View Crime Alerts Log\r\n      </a>\r\n      </button>\r\n\r\n      <button className=\"mdc-button mdc-button--raised general\">\r\n      <a data-toggle=\"tab\" href=\"#form\">\r\n        Report a Crime\r\n      </a>\r\n      </button>\r\n\r\n      <div style={{marginTop: 30}}></div>\r\n      <img width=\"340px\" height=\"200px\" src=\"https://pngimg.com/uploads/handcuffs/handcuffs_PNG33.png\" alt=\"logo\"/>\r\n      <div style={{marginTop: 20}}></div>\r\n      \r\n      <h6>Join our gamified crime alert community today.</h6>\r\n      <button className=\"mdc-button mdc-button--raised general\">\r\n      <a data-toggle=\"tab\" href=\"#register\">\r\n        Register Now\r\n      </a>\r\n      </button>\r\n\r\n    </>\r\n  )\r\n}","// Configuration for firebase authentication\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyCUYFOJIWpUXGo51TvSiu0am3ov1bTenFA\",\r\n  authDomain: \"crime-alert-22ab6.firebaseapp.com\",\r\n  projectId: \"crime-alert-22ab6\",\r\n  storageBucket: \"crime-alert-22ab6.appspot.com\",\r\n  messagingSenderId: \"1016818394710\",\r\n  appId: \"1:1016818394710:web:98b1c9fb98af95aefb3df7\",\r\n  measurementId: \"G-62L51TS7SP\"\r\n};\r\n  \r\nexport default firebaseConfig;","// All of the Login component's API calls and helpers go here.\r\nimport firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport firebaseConfig from \"./firebaseConfig\";\r\nimport \"firebase/firestore\";\r\n\r\nconst firebaseApp = firebase.initializeApp(firebaseConfig);\r\nconst store = firebase.firestore();\r\nfirebase.auth().languageCode = \"en\";\r\n\r\n\r\nexport async function login(email, password) {\r\n  return new Promise((resolve, reject) => {\r\n    firebaseApp\r\n      .auth()\r\n      .signInWithEmailAndPassword(email, password)\r\n      .then(async (resp) => {    \r\n        getLoggedInUser()\r\n        .then(async (user) => {\r\n          let details = await getUserDetails(user.uid);\r\n          resolve({ ...user, ...details });\r\n        });    \r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Login failed: \", error.message);\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n\r\nexport async function logout() {\r\n  firebaseApp\r\n    .auth()\r\n    .signOut()\r\n    .then(() => {\r\n      console.log(\"Successful log out\");\r\n      window.location.replace(\"#home\");\r\n      window.location.reload();\r\n    })\r\n    .catch((err) => {\r\n      console.log(\"Logout failed \", err);\r\n    });\r\n}\r\n\r\nexport async function register(email, password, name, image_url) {\r\n  return new Promise((resolve, reject) => {\r\n    firebaseApp\r\n      .auth()\r\n      .createUserWithEmailAndPassword(\r\n        email,\r\n        password\r\n      )\r\n      .then((resp) => {\r\n        setTimeout(() => {\r\n          store\r\n            .collection(\"user\")\r\n            .doc(resp.user.uid)\r\n            .set({\r\n              email, name, image_url,\r\n              uid: resp.user.uid,\r\n              coins: 100,\r\n              rep: 0,\r\n              rank: 'Beginner'\r\n            })\r\n            .then(() => {\r\n              resolve(resp.user);\r\n            })\r\n            .catch((error) => {\r\n              reject(error);\r\n            });\r\n        }, 100);\r\n      })\r\n      .catch((error) => {\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n\r\n\r\n/**\r\n * Returns the current logged in user. If no logged in, return false.\r\n * @param None\r\n */\r\nexport async function getLoggedInUser() {\r\n  return new Promise((resolve, reject) => {\r\n    firebaseApp.auth().onAuthStateChanged((user) => {\r\n      if (user) resolve(user);\r\n      else reject(false);\r\n    });\r\n  });\r\n}\r\n\r\n\r\nexport async function getUserDetails(uid) {\r\n    return new Promise((resolve, reject) => {\r\n        store\r\n        .collection(\"user\")\r\n        .doc(uid)\r\n        .get()\r\n        .then((details) => {\r\n            if (details.exists) resolve(details.data());\r\n            else reject(null);\r\n        })\r\n        .catch((err) => {\r\n            reject(err);\r\n        });\r\n    });\r\n}\r\n\r\n\r\nexport async function getAllAlerts() {\r\n  return new Promise((resolve, reject) => {\r\n    store\r\n    .collection(\"alert\")\r\n    .get()\r\n    .then((querySnapshot) => {\r\n      let alertsList = [];\r\n      querySnapshot.forEach(doc => {\r\n        alertsList.push({id: doc.id, ...doc.data()});\r\n      });\r\n      resolve(alertsList);\r\n    })\r\n    .catch((err) => {\r\n        reject(err);\r\n    });\r\n  });\r\n}\r\n\r\n\r\nexport async function getShopItems() {\r\n  return new Promise((resolve, reject) => {\r\n    store\r\n    .collection(\"shop\")\r\n    .get()\r\n    .then((querySnapshot) => {\r\n      let shopItems = [];\r\n      querySnapshot.forEach(doc => {\r\n        shopItems.push({id: doc.id, ...doc.data()});\r\n      });\r\n      resolve(shopItems);\r\n    })\r\n    .catch((err) => {\r\n        reject(err);\r\n    });\r\n  });\r\n}\r\n\r\nexport async function purchaseItem(costCoins, uid) {\r\n  return store\r\n  .collection(\"user\")\r\n  .doc(uid)\r\n  .update({ coins: firebase.firestore.FieldValue.increment(-costCoins)});\r\n}\r\n\r\n\r\n/**\r\n * Uploads and/or updates (merges) the details of user on the database.\r\n * @param data data with updated details\r\n * @param uid id of the user\r\n */\r\nexport async function updateUserData(data, uid) {\r\n    return store\r\n        .collection(\"user\")\r\n        .doc(uid)\r\n        .set({ ...data }, { merge: true });\r\n}\r\n\r\nexport async function upvoteAlert(alertID, uid) {\r\n  store\r\n  .collection(\"alert\")\r\n  .doc(alertID)\r\n  .update({ votes: firebase.firestore.FieldValue.increment(1)})\r\n  .then(() => {\r\n    store\r\n    .collection(\"user\")\r\n    .doc(uid)\r\n    .update({upvotes_list: firebase.firestore.FieldValue.arrayUnion(alertID)});\r\n  });\r\n}\r\n\r\n\r\nexport async function downvoteAlert(alertID, uid) {\r\n  store\r\n  .collection(\"alert\")\r\n  .doc(alertID)\r\n  .update({ votes: firebase.firestore.FieldValue.increment(-1)})\r\n  .then(() => {\r\n    store\r\n    .collection(\"user\")\r\n    .doc(uid)\r\n    .update({downvotes_list: firebase.firestore.FieldValue.arrayUnion(alertID)});\r\n  });\r\n}\r\n\r\nexport async function removeUpvote(alertID, uid) {\r\n  store\r\n  .collection(\"alert\")\r\n  .doc(alertID)\r\n  .update({ votes: firebase.firestore.FieldValue.increment(-1)})\r\n  .then(() => {\r\n    store\r\n    .collection(\"user\")\r\n    .doc(uid)\r\n    .update({upvotes_list: firebase.firestore.FieldValue.arrayRemove(alertID)});\r\n  });\r\n}\r\n\r\nexport async function removeDownvote(alertID, uid) {\r\n  store\r\n  .collection(\"alert\")\r\n  .doc(alertID)\r\n  .update({ votes: firebase.firestore.FieldValue.increment(1)})\r\n  .then(() => {\r\n    store\r\n    .collection(\"user\")\r\n    .doc(uid)\r\n    .update({downvotes_list: firebase.firestore.FieldValue.arrayRemove(alertID)});\r\n  });\r\n}\r\n\r\nexport async function downvoteFromUpvoteAlert(alertID, uid) {\r\n  store\r\n  .collection(\"alert\")\r\n  .doc(alertID)\r\n  .update({ votes: firebase.firestore.FieldValue.increment(-2)})\r\n  .then(() => {\r\n    store\r\n    .collection(\"user\")\r\n    .doc(uid)\r\n    .update({\r\n      upvotes_list: firebase.firestore.FieldValue.arrayRemove(alertID)\r\n    }).then(() => {\r\n      store\r\n      .collection(\"user\")\r\n      .doc(uid)\r\n      .update({\r\n        downvotes_list: firebase.firestore.FieldValue.arrayUnion(alertID)\r\n      })\r\n    })\r\n    \r\n  });\r\n}\r\n\r\n\r\nexport async function upvoteFromDownvoteAlert(alertID, uid) {\r\n  store\r\n  .collection(\"alert\")\r\n  .doc(alertID)\r\n  .update({ votes: firebase.firestore.FieldValue.increment(2)})\r\n  .then(() => {\r\n    store\r\n    .collection(\"user\")\r\n    .doc(uid)\r\n    .update({\r\n      downvotes_list: firebase.firestore.FieldValue.arrayRemove(alertID)\r\n    }).then(() => {\r\n      store\r\n      .collection(\"user\")\r\n      .doc(uid)\r\n      .update({\r\n        upvotes_list: firebase.firestore.FieldValue.arrayUnion(alertID)\r\n      })\r\n    })\r\n    \r\n  });\r\n}\r\n\r\n\r\nexport async function submitAlert(uid, data) {\r\n  return new Promise((resolve, reject) => {\r\n      store\r\n      .collection(\"alert\")\r\n      .doc(uid)\r\n      .set({...data})\r\n      .then(() => {\r\n        resolve(\"Submitted.\");\r\n      })\r\n      .catch((error) => {\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n\r\n\r\nexport default firebaseApp;","import React, { useEffect, useState } from 'react';\r\nimport { upvoteAlert, downvoteAlert, downvoteFromUpvoteAlert, upvoteFromDownvoteAlert, removeDownvote, removeUpvote } from '../api/api';\r\n\r\nexport default function Alert({id, title, post_time, votes, contact, description, user_uid, uid, location, upvoted, downvoted}) {\r\n  const [upvotedState, setUpvotedState] = useState(upvoted);\r\n  const [downvotedState, setDownvotedState] = useState(downvoted);\r\n  const [votesState, setVotesState] = useState(votes);\r\n  \r\n  useEffect(() => {\r\n    setUpvotedState(upvoted);\r\n    setDownvotedState(downvoted);\r\n    setVotesState(votes);\r\n  }, [upvoted, downvoted, votes]);\r\n\r\n  function handleUpvote() {\r\n    if (!upvotedState) {\r\n      if (downvotedState) {\r\n        upvoteFromDownvoteAlert(id, user_uid);\r\n        setVotesState(votesState+2);\r\n      }\r\n      else {\r\n        upvoteAlert(id, user_uid);\r\n        setVotesState(votesState+1);\r\n      }\r\n      setUpvotedState(true);\r\n      setDownvotedState(false);\r\n    }\r\n    else { //unvote\r\n      removeUpvote(id, user_uid);\r\n      setVotesState(votesState-1);\r\n      setUpvotedState(false);\r\n    }\r\n  }\r\n\r\n  function handleDownvote() {\r\n    if (!downvotedState) {\r\n      if (upvotedState) {\r\n        downvoteFromUpvoteAlert(id, user_uid);\r\n        setVotesState(votesState-2);\r\n      }\r\n      else {\r\n        downvoteAlert(id, user_uid);\r\n        setVotesState(votesState-1);\r\n      }\r\n      setDownvotedState(true);\r\n      setUpvotedState(false);\r\n    }\r\n    else { //unvote\r\n      removeDownvote(id, user_uid);\r\n      setVotesState(votesState+1);\r\n      setDownvotedState(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"card\" >\r\n      <div className=\"card-body\">\r\n        <h5 className=\"card-title\">{title}</h5>\r\n        <h6 className=\"card-subtitle\">{post_time}</h6>\r\n        <p className=\"card-text\">{description}</p>\r\n\r\n        <div className=\"card-minor\">\r\n          <div className=\"card-extra\">{contact}</div>\r\n          {\r\n            location != null &&\r\n            <div className=\"card-loc\">{location.latitude}, {location.longitude}</div>\r\n          }\r\n        </div>\r\n        \r\n        <button onClick={handleUpvote} class={upvotedState === true ? \"stat-item-marked\" : \"stat-item\"}> <i class=\"fa fa-thumbs-up icon\"></i></button> &nbsp;{votesState}&nbsp;&nbsp;\r\n        <button onClick={handleDownvote} class={downvotedState === true ? \"stat-item-marked\" : \"stat-item\"}> <i class=\"fa fa-thumbs-down icon\"></i></button>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React, {useState, useEffect} from 'react';\r\nimport Alert from './Alert';\r\nimport { getAllAlerts } from '../api/api';\r\n\r\nexport default function AlertView({user, loading, alertsList}) {\r\n  return (\r\n    <>\r\n      <h3>Crime Logs</h3>\r\n      <p>Displaying all posted crime alerts. <i>Be cautious of any fake alerts and report them to us.</i></p>\r\n      {\r\n        user == null ? \"Please login to view our alerts.\"\r\n        : loading ?        \r\n        <div id=\"loading\">\r\n          <div className=\"d-flex justify-content-center\">\r\n            <div className=\"spinner-border\" role=\"status\">\r\n            </div>\r\n          </div>\r\n        </div>\r\n        : alertsList.length === 0 ? \r\n        <p>No alerts to display.</p> :\r\n        alertsList.map(({id, title, post_time, votes, location, contact, description, uid}) =>\r\n            <Alert \r\n            id={id}\r\n            title={title}\r\n            uid={uid}\r\n            user_uid={user.uid}\r\n            post_time={post_time}\r\n            votes={votes} \r\n            location={location}\r\n            contact={contact}\r\n            description={description}\r\n            upvoted={user.upvotes_list.includes(id)}\r\n            downvoted={user.downvotes_list.includes(id)}\r\n            />\r\n        )\r\n      }      \r\n    </>\r\n  )\r\n}","import React from 'react';\r\nimport { withScriptjs, withGoogleMap, GoogleMap, Marker } from \"react-google-maps\"\r\n\r\nexport const MapComponent = withScriptjs(withGoogleMap(({isMarkerShown, location}) => {\r\n    if (!location) {\r\n      return <></>;\r\n    }   \r\n\r\n    return <GoogleMap\r\n      defaultZoom={15}\r\n      defaultCenter={{ lat: location.latitude, lng: location.longitude }}\r\n    >\r\n      {isMarkerShown && <Marker position={{ lat: location.latitude, lng: location.longitude }} />}\r\n    </GoogleMap>;\r\n  } \r\n))\r\n\r\nexport const MainMap = withScriptjs(withGoogleMap(({markerList, location}) => {\r\n  \r\n  return <GoogleMap\r\n      defaultZoom={15}\r\n      defaultCenter={{ lat: location.latitude, lng: location.longitude }}\r\n    >\r\n    { \r\n      markerList.map(markerLoc => {\r\n        if (markerLoc !== null) {\r\n          return <Marker position={{ lat: markerLoc.latitude, lng: markerLoc.longitude }}/>\r\n        }\r\n      })  \r\n    }\r\n  </GoogleMap>;\r\n} \r\n))","import React, {useState, useEffect} from 'react';\r\nimport {MainMap} from './MapComponents';\r\n\r\nexport default function Map({user, alertsList, loading}) {\r\n  const [initLocation, setInitLocation] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const alertWithLoc = alertsList.find(alert => alert.location !== null);\r\n    if (alertWithLoc === undefined) {\r\n      setInitLocation(null);\r\n    }\r\n    else {\r\n      setInitLocation(alertWithLoc.location);\r\n    }\r\n    \r\n  }, [alertsList]);\r\n\r\n  return (\r\n    <>\r\n      <h3>Locate</h3>\r\n      <p>The <b>markers</b> represent all crime alerts submitted by other Crime Fighters.</p>\r\n      {\r\n        (!loading && alertsList.length !== 0) &&\r\n        <MainMap \r\n        googleMapURL=\"https://maps.googleapis.com/maps/api/js?key=AIzaSyDljegl-khc3VGfDMlG_2BpPF21jyFy5Ss&libraries=places&v=weekly\"\r\n        location={initLocation}\r\n        markerList={alertsList.map(alert => alert.location)}\r\n        loadingElement={<div style={{ height: `100%` }} />}\r\n        containerElement={<div style={{ height: `330px` }} />}\r\n        mapElement={<div style={{ height: `100%` }} />}\r\n        />\r\n      }\r\n      <br/>\r\n      <br/>\r\n    </>\r\n  )\r\n}","import Swal from \"sweetalert2\";\r\n\r\nconst Toast = Swal.mixin({\r\n    toast: true,\r\n    position: 'top-end',\r\n    showConfirmButton: false,\r\n    timer: 1500,\r\n    timerProgressBar: true,\r\n    onOpen: (toast) => {\r\n        toast.addEventListener('mouseenter', Swal.stopTimer)\r\n        toast.addEventListener('mouseleave', Swal.resumeTimer)\r\n}\r\n});\r\n\r\nexport default Toast;","import React, {useState, useEffect} from 'react';\r\nimport { Formik, Form, Field, ErrorMessage } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport { MapComponent } from './MapComponents';\r\nimport { submitAlert } from '../api/api';\r\nimport Swal from \"sweetalert2\";\r\nimport Toast from './Toast';\r\nimport firebase from \"firebase/app\";\r\n\r\n\r\nexport default function AlertForm({user}) {\r\n  const [location, setLocation] = useState(null);\r\n\r\n  function handleLocation() {\r\n    if('geolocation' in navigator) {\r\n      function success(position) {\r\n        let lat = position.coords.latitude;\r\n        let lng = position.coords.longitude;\r\n\r\n        setLocation(new firebase.firestore.GeoPoint(lat, lng));\r\n      }\r\n\r\n      function error() {\r\n        alert('Sorry, no position available.');\r\n      }\r\n      navigator.geolocation.watchPosition(success, error, {enableHighAccuracy: false,maximumAge: 100, timeout: 5000 });\r\n    } \r\n    else {\r\n      alert(\"getCurrentPosition Error\");\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"container\">\r\n      <h3>Report a Crime</h3>\r\n      <p>When a criminal activity is suspected, members are encouraged to report to authorities, and not to intervene. <br/><i>Any false reports will be downvoted and bad reputation can lead to an account ban so please refrain from such activity.</i></p>\r\n      <div className=\"formik\">\r\n        <Formik\r\n          initialValues={{ title: \"\", description: \"\", contact: \"\"}}\r\n          validationSchema={Yup.object({\r\n            title: Yup.string().required(\"Please give an appropriate title and category to the alert.\"),\r\n            description: Yup.string().required(\"A complete description about the crime details and the suspect you witnessed is required.\"),\r\n            contact: Yup.string().required(\"Contact details are required for community verification and for the legal enforcement authorities.\"),\r\n          })}\r\n          onSubmit={(values, { setSubmitting }) => {\r\n            setTimeout(() => {\r\n              const alertData = {\r\n                title: values.title, \r\n                description: values.description, \r\n                contact: values.contact, \r\n                post_time: new Date().toLocaleString(),\r\n                uid: user.uid,\r\n                votes: 0,\r\n                location\r\n                };\r\n\r\n              console.log(alertData);\r\n              submitAlert(user.uid, alertData)\r\n                .then((res) => {\r\n                  setSubmitting(false);\r\n                  Toast.fire({\r\n                    icon: 'success',\r\n                    title: 'Submitted the crime alert successfully.'\r\n                  })\r\n                  setTimeout(() => {\r\n                    window.location.reload();\r\n                  }, 1500);\r\n                })\r\n                .catch((error) => {\r\n                  setSubmitting(false);\r\n                  Swal.fire({\r\n                    title: \"Invalid details. Please try again.\",\r\n                    text: error.message,\r\n                    icon: \"error\",\r\n                    timer: 2500\r\n                  })\r\n                });\r\n            }, 400);\r\n          }}\r\n        >\r\n          {({ touched, errors, isSubmitting }) => (\r\n            <Form className=\"spaced-form\">\r\n              <div className=\"form-group\">\r\n                <small>\r\n                  Title\r\n                </small>\r\n                <Field\r\n                  type=\"text\"\r\n                  name=\"title\"\r\n                  placeholder=\"Enter title\"\r\n                  className={`form-control ${\r\n                    touched.title && errors.title ? \"is-invalid\" : \"\"\r\n                  }`}\r\n                />\r\n                <ErrorMessage\r\n                  component=\"div\"\r\n                  name=\"title\"\r\n                  className=\"invalid-feedback\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <small>\r\n                  Description\r\n                </small>\r\n                <Field\r\n                  type=\"text\"\r\n                  name=\"description\"\r\n                  placeholder=\"Enter description\"\r\n                  className={`form-control ${\r\n                    touched.description && errors.description ? \"is-invalid\" : \"\"\r\n                  }`}\r\n                />\r\n                <ErrorMessage\r\n                  component=\"div\"\r\n                  name=\"description\"\r\n                  className=\"invalid-feedback\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <small>\r\n                  Contact\r\n                </small>\r\n                <Field\r\n                  type=\"text\"\r\n                  name=\"contact\"\r\n                  placeholder=\"Enter contact details\"\r\n                  className={`form-control ${\r\n                    touched.contact && errors.contact ? \"is-invalid\" : \"\"\r\n                  }`}\r\n                />\r\n                <ErrorMessage\r\n                  component=\"div\"\r\n                  name=\"contact\"\r\n                  className=\"invalid-feedback\"\r\n                />\r\n              </div>\r\n\r\n              \r\n              <div className=\"form-group\">\r\n                <button id=\"location-btn\" onClick={handleLocation} className=\"mdc-button mdc-button--raised general\">\r\n                  <small> Add Location </small>\r\n                </button>\r\n                {\r\n                  location !== undefined && location !== null &&\r\n                  <MapComponent \r\n                  isMarkerShown\r\n                  googleMapURL=\"https://maps.googleapis.com/maps/api/js?key=AIzaSyDljegl-khc3VGfDMlG_2BpPF21jyFy5Ss&libraries=places&v=weekly\"\r\n                  location={location}\r\n                  loadingElement={<div style={{ height: `100%` }} />}\r\n                  containerElement={<div style={{ height: `400px` }} />}\r\n                  mapElement={<div style={{ height: `100%` }} />}\r\n                  />\r\n                }\r\n              </div>\r\n\r\n              <button type=\"submit\" className=\"mdc-button mdc-button--raised general\" disabled={isSubmitting}>\r\n                {isSubmitting ? \r\n                  <div id=\"login-spinner\" className=\"spinner-border\" role=\"status\"></div>\r\n                  : \"Report Crime\"}\r\n              </button>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n      </div>\r\n      </div>\r\n    </>\r\n  )\r\n}","import React from \"react\";\r\nimport { logout } from \"../api/api\";\r\n\r\nexport default function Profile({name, image_url, email, rank, rep, coins}) {\r\n    return (\r\n      <div className=\"d-flex flex-column justify-content-center align-items-center\">\r\n        <img id=\"profile-img\" src={image_url} alt={name}/><br/>\r\n        <h3>{name}</h3>\r\n        <div>{email}</div>\r\n        <div><b>Rank:</b> {rank}</div>\r\n        <div><b>Reputation:</b> {rep}</div>\r\n        <div><b>Coins:</b> {coins}</div>\r\n        <br/>\r\n        <button style={{marginLeft: 15}} onClick={logout} className=\"mdc-button mdc-button--raised general\">Logout</button>\r\n      </div>\r\n    );\r\n}","import React from \"react\";\r\nimport { Formik, Form, Field, ErrorMessage } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport { login } from \"../api/api\";\r\nimport Profile from './Profile';\r\nimport Swal from \"sweetalert2\";\r\nimport Toast from './Toast';\r\n\r\nexport default function Login({user}) {\r\n    \r\n    if (user != null) {\r\n      return (\r\n        <Profile \r\n        name={user.name}\r\n        rank={user.rank}\r\n        rep={user.rep}\r\n        coins={user.coins}\r\n        email={user.email}\r\n        image_url={user.image_url}/>\r\n      );\r\n    }\r\n    \r\n    return (\r\n      <div>\r\n        <div className=\"container\">\r\n          <h3>Welcome Back!</h3>\r\n          <div className=\"formik\">\r\n            <Formik\r\n              initialValues={{ email: \"\", password: \"\" }}\r\n              validationSchema={Yup.object({\r\n                email: Yup.string()\r\n                  .email(\"Invalid email address\")\r\n                  .required(\"An email address is required\"),\r\n                password: Yup.string().required(\"Password is required\"),\r\n              })}\r\n              onSubmit={(values, { setSubmitting }) => {\r\n                setTimeout(() => {\r\n                  login(values.email, values.password)\r\n                    .then((user) => {\r\n                      setSubmitting(false);\r\n                      Toast.fire({\r\n                        icon: 'success',\r\n                        title: 'Signed in successfully.'\r\n                      })\r\n                      // Redirect using html for page refresh\r\n                      setTimeout(() => {\r\n                        window.location.reload();\r\n                      }, 1500);\r\n                    })\r\n                    .catch((error) => {\r\n                      setSubmitting(false);\r\n                      Swal.fire({\r\n                        title: \"Invalid login details. Please try again.\",\r\n                        text: error.message,\r\n                        icon: \"error\",\r\n                        timer: 2500\r\n                      })\r\n                    });\r\n                }, 400);\r\n              }}\r\n            >\r\n              {({ touched, errors, isSubmitting }) => (\r\n                <Form>\r\n                  <div className=\"form-group\">\r\n                    <small>\r\n                      Email\r\n                    </small>\r\n                    <Field\r\n                      type=\"email\"\r\n                      name=\"email\"\r\n                      placeholder=\"Enter email\"\r\n                      className={`form-control ${\r\n                        touched.email && errors.email ? \"is-invalid\" : \"\"\r\n                      }`}\r\n                    />\r\n                    <ErrorMessage\r\n                      component=\"div\"\r\n                      name=\"email\"\r\n                      className=\"invalid-feedback\"\r\n                    />\r\n                  </div>\r\n  \r\n                  <div className=\"form-group\">\r\n                    <small>\r\n                      Password\r\n                    </small>\r\n                    <Field\r\n                      type=\"password\"\r\n                      name=\"password\"\r\n                      placeholder=\"Enter password\"\r\n                      className={`form-control ${\r\n                        touched.password && errors.password ? \"is-invalid\" : \"\"\r\n                      }`}\r\n                    />\r\n                    <ErrorMessage\r\n                      component=\"div\"\r\n                      name=\"password\"\r\n                      className=\"invalid-feedback\"\r\n                    />\r\n                  </div>\r\n\r\n                  <br/>\r\n                  <button\r\n                    type=\"submit\"\r\n                    className=\"mdc-button mdc-button--raised general\"\r\n                    disabled={isSubmitting}\r\n                  >\r\n                    {isSubmitting ? \r\n                      <div id=\"login-spinner\" className=\"spinner-border\" role=\"status\"></div>\r\n                      : \"Login\"}\r\n                  </button>\r\n\r\n                 \r\n                </Form>\r\n              )}\r\n            </Formik>\r\n\r\n          </div>\r\n          <br/>\r\n          <h6>New user? Join our gamified crime alert community today.</h6>\r\n            <button className=\"mdc-button mdc-button--raised general\">\r\n            <a data-toggle=\"tab\" href=\"#register\">Register</a>\r\n            </button>\r\n\r\n        </div>\r\n      </div>\r\n    );\r\n  }","import React from \"react\";\r\nimport { Formik, Form, Field, ErrorMessage } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport { register } from \"../api/api\";\r\nimport Profile from './Profile';\r\nimport Swal from \"sweetalert2\";\r\nimport Toast from './Toast';\r\n\r\nexport default function Register({user}) {\r\n    \r\n    if (user != null) {\r\n      return (\r\n        <Profile \r\n        name={user.name}\r\n        rank={user.rank}\r\n        rep={user.rep}\r\n        coins={user.coins}\r\n        email={user.email}\r\n        image_url={user.image_url}/>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <div className=\"container\">\r\n          <h3>Join us today!</h3>\r\n          <div className=\"formik\">\r\n            <Formik\r\n              initialValues={{ email: \"\", password: \"\", name: \"\", image_url: \"\" }}\r\n              validationSchema={Yup.object({\r\n                email: Yup.string().email(\"Invalid email address\").required(\"An email address is required.\"),\r\n                password: Yup.string().required(\"A password is required.\"),\r\n                name: Yup.string().required(\"Please enter your full name.\"),\r\n                image_url: Yup.string().required(\"A valid image URL is required for your display picture.\")\r\n              })}\r\n              onSubmit={(values, { setSubmitting }) => {\r\n                setTimeout(() => {\r\n                  register(values.email, values.password, values.name, values.image_url)\r\n                    .then((user) => {\r\n                      setSubmitting(false);\r\n                      Toast.fire({\r\n                        icon: 'success',\r\n                        title: 'Registered successfully. Please proceed to login.'\r\n                      })\r\n                      // Redirect using html for page refresh\r\n                      setTimeout(() => {\r\n                        window.location.replace(\"#login\");\r\n                        window.location.reload();\r\n                      }, 1500);\r\n                    })\r\n                    .catch((error) => {\r\n                      setSubmitting(false);\r\n                      Swal.fire({\r\n                        title: \"Invalid details. Please try again.\",\r\n                        text: error.message,\r\n                        icon: \"error\",\r\n                        timer: 2500\r\n                      })\r\n                    });\r\n                }, 400);\r\n              }}\r\n            >\r\n              {({ touched, errors, isSubmitting }) => (\r\n                <Form className=\"spaced-form\">\r\n                  <div className=\"form-group\">\r\n                    <small>\r\n                      Name\r\n                    </small>\r\n                    <Field\r\n                      type=\"text\"\r\n                      name=\"name\"\r\n                      placeholder=\"Enter name\"\r\n                      className={`form-control ${\r\n                        touched.name && errors.name ? \"is-invalid\" : \"\"\r\n                      }`}\r\n                    />\r\n                    <ErrorMessage\r\n                      component=\"div\"\r\n                      name=\"name\"\r\n                      className=\"invalid-feedback\"\r\n                    />\r\n                  </div>\r\n  \r\n                  <div className=\"form-group\">\r\n                    <small>\r\n                      Email\r\n                    </small>\r\n                    <Field\r\n                      type=\"email\"\r\n                      name=\"email\"\r\n                      placeholder=\"Enter email\"\r\n                      className={`form-control ${\r\n                        touched.email && errors.email ? \"is-invalid\" : \"\"\r\n                      }`}\r\n                    />\r\n                    <ErrorMessage\r\n                      component=\"div\"\r\n                      name=\"email\"\r\n                      className=\"invalid-feedback\"\r\n                    />\r\n                  </div>\r\n  \r\n                  <div className=\"form-group\">\r\n                    <small>\r\n                      Password\r\n                    </small>\r\n                    <Field\r\n                      type=\"password\"\r\n                      name=\"password\"\r\n                      placeholder=\"Enter password\"\r\n                      className={`form-control ${\r\n                        touched.password && errors.password ? \"is-invalid\" : \"\"\r\n                      }`}\r\n                    />\r\n                    <ErrorMessage\r\n                      component=\"div\"\r\n                      name=\"password\"\r\n                      className=\"invalid-feedback\"\r\n                    />\r\n                  </div>\r\n\r\n                  \r\n\r\n                  <div className=\"form-group\">\r\n                    <small>\r\n                      Display Image URL\r\n                    </small>\r\n                    <Field\r\n                      type=\"text\"\r\n                      name=\"image_url\"\r\n                      placeholder=\"Enter an image URL for your display picture hosted online\"\r\n                      className={`form-control ${\r\n                        touched.image_url && errors.image_url ? \"is-invalid\" : \"\"\r\n                      }`}\r\n                    />\r\n                    <ErrorMessage\r\n                      component=\"div\"\r\n                      name=\"image_url\"\r\n                      className=\"invalid-feedback\"\r\n                    />\r\n                  </div>\r\n  \r\n\r\n                  <button\r\n                    type=\"submit\"\r\n                    className=\"mdc-button mdc-button--raised general\"\r\n                    disabled={isSubmitting}\r\n                  >\r\n                    {isSubmitting ? \r\n                      <div id=\"login-spinner\" className=\"spinner-border\" role=\"status\"></div>\r\n                      : \"Register\"}\r\n                  </button>\r\n\r\n                 \r\n                </Form>\r\n              )}\r\n            </Formik>\r\n          </div>\r\n          <br/>\r\n        </div>\r\n      </div>\r\n    );\r\n  }","import React, {useState, useEffect} from 'react';\r\nimport { getShopItems, purchaseItem } from '../api/api'\r\nimport Toast from './Toast';\r\nimport Swal from 'sweetalert2';\r\n\r\nfunction ShopCard({image_url, uid, ucoins, description, title, coins, due_time, id}) {\r\n  function handlePurchase() {\r\n    if (ucoins < coins) {\r\n      Swal.fire({\r\n        title: \"Unable to purchase. You might have insufficient coins.\",\r\n        text: \"Error.\",\r\n        icon: \"error\",\r\n        timer: 2500\r\n      })\r\n    }\r\n    else {\r\n      purchaseItem(coins, uid)\r\n        .then((res) => {\r\n          Toast.fire({\r\n            icon: 'success',\r\n            title: 'Purchase successful. Further details will be emailed to your later.'\r\n          })\r\n          window.location.reload();\r\n        })\r\n        .catch((error) => {\r\n          Swal.fire({\r\n            title: \"Unable to purchase.\",\r\n            text: error.message,\r\n            icon: \"error\",\r\n            timer: 2500\r\n          })\r\n        });\r\n    }\r\n  }\r\n\r\n  return (\r\n  <div className=\"col-sm-3 shop-card\">\r\n    <img className=\"card-img-top shop-card-img\" src={image_url} alt={title}/>\r\n    <div className=\"card-body shop-card-body\">\r\n      <h5 className=\"card-title shop-card-title\">{title}</h5>\r\n      <p className=\"card-text shop-card-text\">{description}</p>\r\n      {\r\n        due_time !== null &&\r\n        <p className=\"card-extra\">Avail Until {due_time.toDate().toLocaleString().toString()}</p>\r\n      }\r\n      <button onClick={handlePurchase} className=\"btn btn-primary shop-btn\">{coins} Coins</button>\r\n    </div>\r\n  </div>\r\n  );\r\n}\r\n\r\nexport default function Shop({user}) {\r\n\r\n  const [shopItems, setShopItems] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Setting user state if user logged in.\r\n  useEffect(() => {\r\n    getShopItems()\r\n    .then(async (shopDocs) => {\r\n        setShopItems(shopDocs);\r\n        setLoading(false);\r\n      })\r\n      .catch(() => {\r\n        setShopItems([]);\r\n        setLoading(false);\r\n      });\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <h3>Shop</h3>\r\n      <p className=\"card-extra\">Coins: {user.coins}</p>\r\n      <p>Use your hard-earned coins from crime fighting to avail coupons, discounts and protection gear. </p>\r\n\r\n      <div className=\"row\">\r\n      {\r\n        !loading &&\r\n\r\n        shopItems.map(({title, description, coins, image_url, due_time, id}) => \r\n        <ShopCard \r\n        id={id}\r\n        uid={user.uid}\r\n        ucoins={user.coins}\r\n        title={title}\r\n        description={description}\r\n        coins={coins}\r\n        image_url={image_url}\r\n        due_time={due_time}\r\n        />\r\n        )\r\n      }\r\n      </div>\r\n    </>\r\n  )\r\n}","import React, {useState, useEffect} from 'react';\r\nimport './App.css';\r\nimport Home from './components/Home';\r\nimport AlertView from './components/AlertView';\r\nimport Map from './components/Map';\r\nimport AlertForm from './components/AlertForm';\r\nimport Login from './components/Login';\r\nimport Register from './components/Register';\r\nimport Shop from './components/Shop';\r\nimport { getLoggedInUser, getUserDetails, getAllAlerts } from \"./api/api\";\r\n\r\n\r\nfunction App() {\r\n  const [authStatusLoaded, setAuthStatusLoaded] = useState(false); // used to wait if any user is logged in\r\n  const [user, setUser] = useState(null);\r\n  const [alertsList, setAlertList] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n\r\n  // Setting user state if user logged in.\r\n  useEffect(() => {\r\n    getLoggedInUser()\r\n      .then(async (user) => {\r\n        let details = await getUserDetails(user.uid);\r\n        setUser({ ...user, ...details });\r\n        setAuthStatusLoaded(true);\r\n      })\r\n      .catch(() => {\r\n        setUser(null);\r\n        setAuthStatusLoaded(true);\r\n      });\r\n    \r\n    getAllAlerts()\r\n    .then(async (alertDocs) => {\r\n        setAlertList(alertDocs);\r\n        setLoading(false);\r\n      })\r\n      .catch(() => {\r\n        setAlertList([]);\r\n        setLoading(false);\r\n      });\r\n  }, []);\r\n\r\n  // if authentication has not been loaded yet\r\n  if (!authStatusLoaded) {\r\n    return (\r\n      <div id=\"loading-spinner\" className=\"spinner-border\" role=\"status\"></div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <nav className=\"navbar navbar-expand-sm bg-dark navbar-dark fixed-top\">\r\n        <a className=\"navbar-brand title-text\" href=\"#home\">Crime Fighters</a>\r\n        <button className=\"navbar-toggler\" type=\"button\" data-target=\"#collapsibleNavbar\" data-toggle=\"collapse\">\r\n          <span className=\"navbar-toggler-icon\"></span>\r\n        </button>\r\n        <div className=\"collapse navbar-collapse\" id=\"collapsibleNavbar\">\r\n          <ul className=\"nav nav-tabs navbar-nav\">\r\n            <li className=\"nav-item\">\r\n              <a className=\"nav-link active\" data-toggle=\"tab\" href=\"#home\">Home</a>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n              <a className=\"nav-link\" data-toggle=\"tab\" href=\"#login\">{user == null ? \"Login\" : \"Profile\"}</a>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n              <a className=\"nav-link\" data-toggle=\"tab\" href=\"#form\">Report a Crime</a>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n              <a className=\"nav-link\"data-toggle=\"tab\" href=\"#view\">View Crime Log</a>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n              <a className=\"nav-link\"data-toggle=\"tab\" href=\"#locate\">Locate</a>\r\n            </li>    \r\n            <li className=\"nav-item\">\r\n              <a className=\"nav-link\"data-toggle=\"tab\" href=\"#shop\">Shop</a>\r\n            </li>   \r\n          </ul>\r\n      </div>  \r\n    </nav>\r\n\r\n    <div className=\"tab-content container\" id=\"main\">\r\n\r\n      <div id=\"home\" className=\"tab-pane fade in active show\">\r\n        <Home user={user}/>\r\n      </div>\r\n\r\n      <div id=\"login\" className=\"tab-pane fade\">\r\n        <Login user={user}/>\r\n      </div>\r\n\r\n      <div id=\"register\" className=\"tab-pane fade\">\r\n        <Register user={user}/>\r\n      </div>\r\n\r\n      <div id=\"view\" className=\"tab-pane fade\">\r\n        <AlertView user={user} alertsList={alertsList} loading={loading}/>\r\n      </div>\r\n\r\n      <div id=\"locate\" className=\"tab-pane fade\">\r\n        <Map user={user} alertsList={alertsList} loading={loading}/>\r\n      </div>\r\n\r\n      <div id=\"form\" className=\"tab-pane fade\">\r\n        <AlertForm user={user}/>\r\n      </div>\r\n\r\n      <div id=\"shop\" className=\"tab-pane fade\">\r\n        <Shop user={user}/>\r\n      </div>\r\n\r\n\r\n    </div>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;","\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\nserviceWorker.register();\r\n"],"sourceRoot":""}